/*! JFS v1.4.7 | https://github.com/kenleonhard/jfs | Copyright 2018 Ken Leonhard | @licence MIT */
!function (e, t) { "use strict"; var a = "blank.html", s = ["search", "number", "range", "color", "tel", "url", "email", "month", "week", "time", "date", "datetime", "datetime-local"], i = ["text", "password", "hidden", "search", "range", "color", "tel", "url", "email", "month", "week", "time", "number", "date", "datetime", "datetime-local"], n = ["standard", "touch"], l = { NoValidate: !1, UseHtml5Required: !1, AutoComplete: !0, IncludeAutoCompleteTrigger: !1, LabelPosition: "above", LabelSuffix: ":", LabelRequiredString: "<span class='jfs_required_label'>*</span>", LabelRequiredPrepend: !1, OptionLabelPosition: "right", FieldButtonPosition: "right", IconLabelPosition: "right", InlineOptions: !0, InfoBubbleIcon: "", RepeatableGroupIcons: {}, Interface: n[0], ExcludeFormTags: !1, AddZeroedTabIndexes: !0, ResetPageTabIndexes: !1, CustomFields: {}, CustomContainers: {}, CustomInputOptions: {}, Functions: {} }, r = { item: "i", field_sets: "sets", legend: "lg", fields: "fs", field: "f", key: "k", show: "s", type: "t", label: "l", title: "ttl", disabled: "d", placeholder: "p", autofocus: "a", autocomplete: "c", label_position: "lp", mods: "m", mods_group_fields: "mgf", value: "v", field_value: "fv", options: "os", options_predefined: "osp", inline: "in", option_label_position: "olp", control_btns: "cbts", interactions: "ints", detections: "dets", detect: "det", bool_operator: "bop", values: "vs", actions: "acts", actions_true: "actst", actions_false: "actsf", action: "act", target: "tgt", params: "prms", param: "prm", field_btns: "fbts" }, o = { root: "jfs", vals: "values" }, d = { Req: "required", ReqPrepend: "requiredprepend", ReqCustom: "requiredcustom", LabelSuffix: "labelsuffix", AddClass: "addclass", AddClassToPair: "addclasstopair", AddClassToLabelContainer: "addclasstolabelcont", AddClassToLabel: "addclasstolabel", AddClassToFieldContainer: "addclasstofieldcont", AddClassToField: "addclasstofield", AddDataAttrs: "adddataattributes", Length: "length", Min: "min", Max: "max", Count: "count", Status: "status", AllowChars: "allowchars", PreventChars: "preventchars", CharCounter: "charcounter", WordCounter: "wordcounter", AugmentBtns: "augmentbuttons", AugmentHtml: "augmenthtml", ButtonText: "btn_text", ButtonTitle: "btn_title", ButtonPosition: "btn_position", ButtonIcon: "btn_icon", ButtonIconLabelPosition: "btn_icon_label_position", ButtonFunction: "btn_function", ButtonFunctionParam: "btn_function_param", WidthFillWrap: "widthfillwrap", InfoBub: "infobubble" }, u = { Container: "jfs_cont", Interface_Prefix: "jfs_int_", Form: "jfs_form", Set: "jfs_set", Pair: "jfs_pair", Label: "jfs_lbl", Field: "jfs_fld", Group: "jfs_grp", KeyPrefix: "jfs_key_", FieldWrap: "jfs_fld_wrap", Btn: "jfs_btn", AugmentBtn: "jfs_aug_btn", AugmentHtml: "jfs_aug_html", AugmentHtmlAbove: "jfs_aug_html_above", AugmentHtmlBelow: "jfs_aug_html_below", AugmentHtmlLabelAbove: "jfs_aug_html_label_above", AugmentHtmlLabelBelow: "jfs_aug_html_label_below", AugmentHtmlFieldAbove: "jfs_aug_html_field_above", AugmentHtmlFieldBelow: "jfs_aug_html_field_below", RadioLabel: "jfs_rdo_lbl", CheckboxLabel: "jfs_cb_lbl", FieldTypePrefix: "jfs_fldtype_", ContainsSetPrefix: "jfs_ctnsset_", ContainsFieldPrefix: "jfs_ctnsfld_", ContainsGroup: "jfs_ctnsgrp", LabelPositionPrefix: "jfs_lblpos_", ContainsHiddenField: "jfs_ctnshidden", ContainsHtmlField: "jfs_ctnshtml", Unshown: "jfs_unshown", HasFocus: "jfs_has_focus", InlineOpt: "jfs_inline_option", BlockOpt: "jfs_block_option", InfoBub: "jfs_infobubble", Date: "jfs_date", DateTime: "jfs_datetime", DateTimeLocal: "jfs_datetime_local", CharCounter: "jfs_charcounter", WordCounter: "jfs_wordcounter", CharCounterText: "jfs_charcounter_text", WordCounterText: "jfs_wordcounter_text", RepGrpSets: "jfs_repgrp_sets", RepGrpBtns: "jfs_repgrp_btns", RepGrpCtrlBtns: "jfs_repgrp_ctrl_btns", RepGrpBtn: "jfs_repgrp_btn", InRepGrp: "jfs_in_repgrp", AutoCompleteTriggerButton: "jfs_trigger_autocomplete" }, c = { Disabled: 'disabled="disabled"', Selected: 'selected="selected"', Checked: 'checked="checked"', Required: 'required="required"', AutoFocus: 'autofocus="autofocus"', AutoComplete: "autocomplete", PlaceHolder: "placeholder", MaxLength: "maxlength", Title: "title", DATA_FormKeys: "jfs_formkeys", DATA_FieldName: "jfs_fieldname", DATA_ShowStatus: "jfs_showstatus", DATA_MinLength: "jfs_minlength", DATA_AllowChars: "jfs_allowchars", DATA_PreventChars: "jfs_preventchars", DATA_BtnFunct: "jfs_btn_function", DATA_BtnFunctParam: "jfs_btn_function_param", DATA_DTPicker: "jfs_dtpicker", DATA_RepGrpBtnAddLoc: "jfs_repgrp_btn_addloc", DATA_RequiredMessage: "jfs_required_message" }, p = { LENGTH_STATUS: "jfs_length_status" }, h = { Key: "/", Checkbox_Value: "|" }, f = !1, m = "/"; if (e.jQuery) { f = !0; var b, A, v, g, F = document.getElementById("jfs-library-script"); if (null !== F) g = F; else { var C = document.getElementsByTagName("script"); g = C[C.length - 1] } m = g.getAttribute("src").split("?")[0].split("/").slice(0, -1).join("/") + "/" } else alert("JBU Forms Error: jQuery Library Not Loaded."); var y = { Init: function (t, a, s) { var o = jQuery.extend(!0, {}, s); if (f) { if ("ContainerId" in o) { if (o.Container = jQuery("#" + o.ContainerId), o.Container.length > 0) { if (o.FieldsInit = eF(t), o.ValuesKeys = [], o.ValuesUnfilled = [], o.FormIsReady = !1, o.TabPressed = !1, o.ShiftTabPressed = !1, o.RepeatableGroups = function e(t) { for (var a = {}, s = {}, i = 0; i < t.length; i++)B(t[i][r.key], t[i], s, a); return { Values: a, Adds: s } }(o.FieldsInit[r.field_sets]), o.PreDefindedOptionsNoEmptyDict = eC(!1), o.PreDefindedOptionsDict = eC(!0), r.options_predefined in o.FieldsInit) for (var m = o.FieldsInit[r.options_predefined], g = 0; g < m.length; g++)r.key in m[g] && r.options in m[g] && (o.PreDefindedOptionsDict[m[g][r.key]] = m[g][r.options]); for (var F in o.FieldsCurrent = eF(o.FieldsInit), r.values in a && ei(o.FieldsCurrent[r.field_sets], a[r.values], "", o), l) F in o || (o[F] = l[F]); !function t(a) { for (var s, l, o = 0; o < n.length; o++)a.Container.removeClass(u.Interface_Prefix + n[o]); for (var f in a.Container.addClass(u.Container).addClass(u.Interface_Prefix + a.Interface).empty().html((s = a, l = V(s.FieldsCurrent[r.field_sets], [], !1, s), s.ExcludeFormTags || (l = q("form", "", 0, [], [], [], l, s)), l)), a.Form = jQuery("#" + a.ContainerId + " form"), a.Interactions = function e(t) { var a = { Setting: {}, OnFocus: {}, OnBlur: {}, OnKeyUp: {} }; if (r.interactions in t.FieldsCurrent) for (var s = t.FieldsCurrent[r.interactions], i = 0; i < s.length; i++)for (var n = s[i], l = 0; l < n[r.detections].length; l++) { var o = n[r.detections][l][r.target]; o.split(h.Key), "onfocus" === n[r.detections][l][r.detect] ? o in a.OnFocus ? a.OnFocus[o].push(n) : r.actions in n ? a.OnFocus[o] = n[r.actions] : r.actions_true in n && (a.OnFocus[o] = n[r.actions_true]) : "onblur" === n[r.detections][l][r.detect] ? o in a.OnBlur ? a.OnBlur[o].push(n) : r.actions in n ? a.OnBlur[o] = n[r.actions] : r.actions_true in n && (a.OnBlur[o] = n[r.actions_true]) : "onkeyup" === n[r.detections][l][r.detect] ? o in a.OnKeyUp ? a.OnKeyUp[o].push(n) : r.actions in n ? a.OnKeyUp[o] = n[r.actions] : r.actions_true in n && (a.OnKeyUp[o] = n[r.actions_true]) : o in a.Setting ? a.Setting[o].push(n) : a.Setting[o] = [n] } return a }(a), $(a.Form, a), function t(a) { for (var s, n = [], l = 0; l < i.length; l++)n.push("input." + u.Field + "_input[type=" + i[l] + "]"); A = n.join(", ") + ", textarea." + u.Field + "_textarea", v = "select." + u.Field + "_select, input." + u.Field + "_input[type=radio], input." + u.Field + "_input[type=checkbox]", a.Form.on("paste", A, function (e) { var t = jQuery(this); setTimeout(function () { t.trigger("custompaste", e) }, 100) }), a.Form.on("keyup custompaste actionchange externalchange focusout", A, function (e) { clearTimeout(s); var t, i, n, l, r, o, d = jQuery(this), h = T(d, a); (d.attr(c.MaxLength) || d.data(c.DATA_MinLength)) && function e(t) { clearTimeout(b), jQuery("#" + p.LENGTH_STATUS).remove(); var a = !1, s = 0, i = 0, n = 9999, l = t.val().length; if (t.data(c.DATA_ShowStatus)) { a = !0; var r = t.data(c.DATA_ShowStatus); -1 !== r.indexOf("%") && (s = parseInt(r.replace("%", ""))) } t.data(c.DATA_MinLength) && (i = parseInt(t.data(c.DATA_MinLength))), t.is("[" + c.MaxLength + "]") && (n = parseInt(t.attr(c.MaxLength))); var o = l / n * 100 > s; if (a && (l < i || o)) { var d = "<div id='" + p.LENGTH_STATUS + "'><p>"; d += "Length: <b>" + l + "</b>"; var u = []; i > 0 && u.push("MIN: <b>" + i + "</b>"), n < 9999 && u.push("MAX: <b>" + n + "</b>"), d += "<br/><span>(" + u.join(", ") + ")</span>", d += "</p></div>", t.before(d), b = setTimeout(function () { jQuery("#" + p.LENGTH_STATUS).fadeOut(100) }, 3e3), t.blur(function () { jQuery("#" + p.LENGTH_STATUS).remove(), clearTimeout(b) }) } }(d), d.hasClass(u.Field + "_input_number") && d.val(em(h.DomVal, "0123456789.-", !1)), d.data(c.DATA_AllowChars) && d.val(em(h.DomVal, d.data(c.DATA_AllowChars), !1)), d.data(c.DATA_PreventChars) && d.val(function e(t, a, s) { t += ""; var i = ""; s && (t = t.replace(/ /g, "_")); for (var n = 0; n < t.length; n++)-1 === a.toString().indexOf(t.charAt(n)) && (i += t.charAt(n)); return i }(h.DomVal, d.data(c.DATA_PreventChars), !1)), i = d, n = h, l = a, r = (t = e.type, "actionchange" === t ? "action" : "externalchange" === t ? "external" : "user"), i.hasClass(u.CharCounter) && eb(i), i.hasClass(u.WordCounter) && eA(i), o = [], n.FormKey in l.Interactions.Setting && (o = _(n.FormKey, l)), x(i, n, l, r), I(o, l) }), a.Form.on("change actionchange externalchange customoptionsinit", v, function (e) { var t = jQuery(this), s = T(t, a), i = []; if (s.FormKey in a.Interactions.Setting && (i = _(s.FormKey, a)), "radio" === s.FcField[r.type] || "checkbox" === s.FcField[r.type]) { var n = s.FormKey.substr(0, s.FormKey.lastIndexOf(h.Key)); n in a.Interactions.Setting && (i = i.concat(_(n, a))) } s.FcField[r.field_value] = s.DomVal; var l = O(a); if (a.FormIsReady) { var o = "user"; "actionchange" === e.type ? o = "action" : "externalchange" === e.type ? o = "external" : "customoptionsinit" === e.type && (o = "customoptionsinit"), "Changed" in a && a.Changed(t, s.FormKey, s.DomVal, s.FcVal, l.Values, l.Unfilled, a, o) } I(i, a) }), a.Form.on("focus", A + ", select." + u.Field + "_select, button." + u.Field + "_button", function () { jQuery(this).parent().parent().parent().addClass(u.HasFocus) }), a.Form.on("blur", A + ", select." + u.Field + "_select, button." + u.Field + "_button", function () { jQuery(this).parent().parent().parent().removeClass(u.HasFocus) }), a.Form.on("focus", "input." + u.Field + "_input[type=radio], input." + u.Field + "_input[type=checkbox]", function () { jQuery(this).parent().addClass(u.HasFocus), jQuery(this).parent().parent().parent().parent().addClass(u.HasFocus) }), a.Form.on("blur", "input." + u.Field + "_input[type=radio], input." + u.Field + "_input[type=checkbox]", function () { jQuery(this).parent().removeClass(u.HasFocus), jQuery(this).parent().parent().parent().parent().removeClass(u.HasFocus) }), a.Form.on("focus", A + ", " + v, function (e) { var t = jQuery(this), s = T(t, a); s.FormKey in a.Interactions.OnFocus && I(a.Interactions.OnFocus[s.FormKey], a) }), a.Form.on("blur", A + ", " + v, function (e) { var t = jQuery(this), s = T(t, a); s.FormKey in a.Interactions.OnBlur && I(a.Interactions.OnBlur[s.FormKey], a) }), a.Form.on("click", "button." + u.Btn + ", button." + u.AugmentBtn, function () { var t = jQuery(this), s = t.data(c.DATA_BtnFunct), i = t.data(c.DATA_FormKeys).join(h.Key), n = O(a), l = t.data(c.DATA_BtnFunctParam); try { a.Functions[s](n.Values, n.Unfilled, a, i, l) } catch (r) { e.console && console.log("JFS Error: Unable to run function: " + s, r) } }), a.Form.on("click", "button." + u.RepGrpBtn, function () { var t = jQuery(this), s = "prepend" === t.data(c.DATA_RepGrpBtnAddLoc); t.hasClass(u.RepGrpBtn + "_add") ? function t(a, s, i) { var n = i.FieldsCurrent[r.field_sets], l = a.data(c.DATA_FormKeys), o = W(l.slice(0), n, !0), u = 500; if (r.mods in o) { var p = ec(o[r.mods]); if (d.Count in p) try { var f = eh(p[d.Count][r.params]); d.Max in f && (u = parseInt(f[d.Max])) } catch (m) { e.console && console.log("JFS Error: Error parsing repeatable group min count modifier", l, m) } } if (o[r.field_sets].length < u) { for (var b = [l[0]], A = 1; A < l.length; A += 2)b.push(l[A]); var v = b.join(h.Key); "RepeatableGroupBeforeChange" in i ? i.RepeatableGroupBeforeChange("add", a, v, i, function () { S(l, a, o, v, s, i) }) : S(l, a, o, v, s, i) } }(t.parent().parent(), s, a) : t.hasClass(u.RepGrpBtn + "_remove") ? R(t.parent().parent().parent(), "remove", a) : t.hasClass(u.RepGrpBtn + "_up") ? R(t.parent().parent().parent(), "up", a) : t.hasClass(u.RepGrpBtn + "_down") && R(t.parent().parent().parent(), "down", a) }) }(a), a.Form.find("select").trigger("customoptionsinit"), a.Interactions.Setting) I(_(f, a), a); a.Form.find("input[autofocus]").eq(0).focus(), a.ResetPageTabIndexes && y.SetTabIndexes(), y.Packages[a.ContainerId] = a, a.FormIsReady = !0, "Ready" in a && a.Ready(O(a).Values, a) }(o) } else alert('JBU Forms Error: A container with id "' + o.ContainerId.toString() + '" could not be found on the page.') } else alert("JBU Forms Error: 'ContainerId' must be set.") } else !function e(t, a) { f ? y.Init(t, a) : setTimeout(function () { e(t, a) }, 500) }(t, o) }, Packages: {}, ParseFormXml: function e(t) { var a = {}; return jQuery(jQuery.parseXML(t)).find(o.root).children().each(function (e, t) { var s = jQuery(t); a[r[t.nodeName]] = ea(s) }), a }, ParseValuesXml: function e(t) { var a = {}, s = {}; return jQuery(jQuery.parseXML(t)).find(o.root + " " + o.vals).children().each(function (e, t) { var a = jQuery(t); s[t.nodeName] = es(a) }), a[r[o.vals]] = s, a }, PerformFormActions: I, GetPredefinedOptions: eC, ParseSelectOptions: Z, ParseModifiersList: ec, ParseModifierParamsList: eh, GetCurrentValues: O, GetDomField: k, GetCurrentFieldValue: function (e, t) { var a = k(e, t); return a.hasClass(u.Unshown) ? "" : L(a) }, TriggerAutoCompleteSubmit: function (e) { jQuery("#" + e.ContainerId + " button." + u.AutoCompleteTriggerButton).click() }, RegisterExternalChange: function (e) { e.trigger("externalchange") }, TriggerBlurByFieldKeys: function (e, t) { for (var a = [], s = 0; s < e.length; s++)a.push({ tgt: e[s], act: "setfocusto" }), a.push({ tgt: e[s], act: "triggerbluron" }); y.PerformFormActions(a, t) }, SetTabIndexes: function (e) { void 0 === e && (e = ":input:not(:hidden)"), jQuery(e).each(function (e) { jQuery(this).attr("tabindex", e + 1) }) }, Html5RequiredIsValid(e) { let t = !0; return e.Form.find("[required]").each(function () { let e = jQuery(this)[0]; if (!e.checkValidity()) { let a = e.getAttribute("data-" + c.DATA_RequiredMessage); return null !== a && e.setCustomValidity(e.getAttribute("data-" + c.DATA_RequiredMessage)), e.reportValidity(), null !== a && jQuery(this).one("change, blur", function () { jQuery(this)[0].setCustomValidity("") }), t = !1, !1 } }), t } }; function $(e, t) { e.find("input, select, textarea").each(function () { var e = jQuery(this); if (e.hasClass(u.CharCounter) && eb(e), e.hasClass(u.WordCounter) && eA(e), void 0 !== jQuery.ui) { if (e.hasClass(u.Date)) { var a = e.data(c.DATA_DTPicker); "JfsNoWeekends" in a && a.JfsNoWeekends && (a.beforeShowDay = jQuery.datepicker.noWeekends), a.onClose = function () { x(e, T(e, t), t, "user") }, e.datepicker(a) } else if (e.hasClass(u.DateTime) || e.hasClass(u.DateTimeLocal)) { var s = e.data(c.DATA_DTPicker); "JfsNoWeekends" in s && s.JfsNoWeekends && (s.beforeShowDay = jQuery.datepicker.noWeekends), s.addSliderAccess = !0, s.sliderAccessArgs = { touchonly: !1 }, s.onClose = function () { x(e, T(e, t), t, "user") }, e.datetimepicker(s) } } }) } function k(e, t) { var a = e.split(h.Key), s = K(a.slice(0), t.FieldsInit[r.field_sets]); return M(a.slice(0), t.Form, s) } function T(e, t) { var a = t.FieldsCurrent[r.field_sets], s = e.attr("name"), i = L(e), n = e.data(c.DATA_FormKeys), l = n.join(h.Key), o = W(n.slice(0), a, !1), d = r.field_value in o ? o[r.field_value] : ""; return { FieldKey: s, DomVal: i, FormKey: l, FcField: o, FcVal: d } } function L(e) { var t = e.eq(0).attr("type"); if ("radio" === t) { var a = e.eq(0).parent().parent().find("input:checked").val(); return void 0 === a ? "" : a } if ("checkbox" !== t) return e.val(); var s = []; return e.eq(0).parent().parent().find("input:checked").each(function () { s.push(jQuery(this).val()) }), s.join(h.Checkbox_Value) } function D(e, t) { var a = !1, s = e.eq(0).attr("type"); return a = "radio" === s || "checkbox" === s ? void 0 !== e.eq(0).parent().parent().find("input:checked").val() : !(t && "" === e.val()) } function w(e, t) { for (var a = t.FieldsCurrent[r.field_sets], s = {}, i = 0; i < a.length; i++)a[i][r.key] === e && (s = a[i]); return s } function x(e, t, a, s) { if (t.FcVal !== t.DomVal) { t.FcField[r.field_value] = t.DomVal; var i = O(a); a.FormIsReady && "Changed" in a && a.Changed(e, t.FormKey, t.DomVal, t.FcVal, i.Values, i.Unfilled, a, s) } } function _(e, t) { var a = []; if (e in t.Interactions.Setting) for (var s = t.Interactions.Setting[e], i = 0; i < s.length; i++) { var n = r.bool_operator in s[i] ? s[i][r.bool_operator] : "OR"; P(s[i][r.detections], n, t) ? r.actions_true in s[i] ? a = a.concat(s[i][r.actions_true]) : r.actions in s[i] && (a = a.concat(s[i][r.actions])) : r.actions_false in s[i] && (a = a.concat(s[i][r.actions_false])) } return a } function P(e, t, a) { for (var s = !1, i = 0, n = 0; n < e.length; n++) { var l = !1, o = e[n][r.target].split(h.Key), d = K(o.slice(0), a.FieldsInit[r.field_sets]), u = a.FieldsCurrent[r.field_sets], c = w(o[0], a), p = M(o.slice(0), a.Form, d), f = W(o.slice(0), u, !1), m = p.is(":visible"), b = !(r.show in f && "false" === f[r.show]) && !(r.show in c && "false" === c[r.show]), A = !1; switch (e[n][r.detect]) { case "onshow": A = !0, !b && m && (l = !0); break; case "onhide": A = !0, b && !m && (l = !0) }if (!A) { var v = r.param in e[n] ? e[n][r.param] : ""; if (d) { var g = W(o.slice(0), u, !0)[r.field_sets].length; switch (e[n][r.detect]) { case "groupitemcountis": g === parseInt(v, 10) && (l = !0); break; case "groupitemcountlessthan": g < parseInt(v, 10) && (l = !0); break; case "groupitemcountgreaterthan": g > parseInt(v, 10) && (l = !0) } } else { var F = L(p), C = f[r.field_value]; switch (e[n][r.detect]) { case "isshown": m && (l = !0); break; case "ishidden": m || (l = !0); break; case "hasvalue": D(p, !1) && (l = !0); break; case "hasvaluenotempty": D(p, !0) && (l = !0); break; case "hasnovalue": D(p, !1) || (l = !0); break; case "hasnovalueorempty": D(p, !0) || (l = !0); break; case "onchange": F !== C && (l = !0); break; case "onchangenotempty": "" !== F && null !== F && (l = !0); break; case "valueis": F === v && (l = !0); break; case "valueisnot": F !== v && (l = !0); break; case "valuelessthan": parseInt(F, 10) < parseInt(v, 10) && (l = !0); break; case "valuegreaterthan": parseInt(F, 10) > parseInt(v, 10) && (l = !0); break; case "checkboxvaluecontains": -1 !== F.split(h.Checkbox_Value).indexOf(v) && (l = !0); break; case "checkboxvaluedoesnotcontain": -1 === F.split(h.Checkbox_Value).indexOf(v) && (l = !0); break; case "checkboxvaluesumis": for (var y = F.split(h.Checkbox_Value), $ = 0, k = 0; k < y.length; k++)$ += isNaN(parseInt(y[k], 10)) ? 0 : parseInt(y[k], 10); $ === parseInt(v, 10) && (l = !0); break; case "checkboxvaluesumgreaterthan": for (var T = F.split(h.Checkbox_Value), x = 0, _ = 0; _ < T.length; _++)x += isNaN(parseInt(T[_], 10)) ? 0 : parseInt(T[_], 10); x > parseInt(v, 10) && (l = !0); break; case "checkboxvaluesumlessthan": for (var P = F.split(h.Checkbox_Value), I = 0, B = 0; B < P.length; B++)I += isNaN(parseInt(P[B], 10)) ? 0 : parseInt(P[B], 10); I < parseInt(v, 10) && (l = !0) } } } l && i++ } return "OR" === t && i > 0 ? s = !0 : "AND" === t && i === e.length ? s = !0 : "XOR" === t && i % 2 != 0 ? s = !0 : -1 !== t.indexOf(">") && !isNaN(parseInt(t.substring(1), 10)) && i > parseInt(t.substring(1), 10) ? s = !0 : -1 !== t.indexOf("<") && !isNaN(parseInt(t.substring(1), 10)) && i < parseInt(t.substring(1), 10) ? s = !0 : -1 === t.indexOf("=") || isNaN(parseInt(t.substring(1), 10)) || i !== parseInt(t.substring(1), 10) || (s = !0), s } function I(t, a) { for (var s = a.FieldsCurrent[r.field_sets], i = 0; i < t.length; i++) { var n = t[i][r.target], l = t[i][r.action], o = r.param in t[i] ? t[i][r.param] : ""; if ("showset" === l || "hideset" === l) { var d = w(n, a), c = E(n, a); "showset" === l ? (c.removeClass(u.Unshown), d[r.show] = "true") : (c.hasClass(u.Unshown) || c.addClass(u.Unshown), d[r.show] = "false") } else if ("runfunction" === l) try { var p = O(a); a.Functions[n](p.Values, p.Unfilled, a, o) } catch (f) { e.console && console.log("JFS Error: Unable to run function.", n, f) } else try { var m = n.split(h.Key), b = K(m.slice(0), a.FieldsInit[r.field_sets]), A = M(m.slice(0), a.Form, !0), v = M(m.slice(0), a.Form, b), g = W(m.slice(0), s, b); switch (l) { case "disablefield": var F = m[m.length - 1], C = parseInt(F), y = !isNaN(C), $ = v.attr("type"); if ("select" !== $ || v.hasClass(u.KeyPrefix + F)) { if (v.prop("disabled", !0), "radio" === $ || "checkbox" === $) for (var k = 0; k < g[r.options].length; k++)(!y || y && k === C) && (g[r.options][k][r.disabled] = "true"); else g[r.disabled] = "true"; v.trigger("actionchange") } else { var T = v.find("option"); T.length > C && (T.eq(C).prop("disabled", !0), g[r.options][C][r.disabled] = "true", v.trigger("actionchange")) } break; case "enablefield": var D = m[m.length - 1], x = parseInt(D), _ = !isNaN(x), P = v.attr("type"); if ("select" !== P || v.hasClass(u.KeyPrefix + D)) { if (v.prop("disabled", !1), "radio" === P || "checkbox" === P) for (var I = 0; I < g[r.options].length; I++)(!_ || _ && I === x) && (g[r.options][I][r.disabled] = "false"); else g[r.disabled] = "false"; v.trigger("actionchange") } else { var B = v.find("option"); B.length > x && (B.eq(x).prop("disabled", !1), g[r.options][x][r.disabled] = "false", v.trigger("actionchange")) } break; case "setaugmenthtmlaboveto": A.find("div." + u.AugmentHtmlAbove).remove(), A.prepend("<div class='" + u.AugmentHtml + " " + u.AugmentHtmlAbove + "'>" + o + "</div>"); break; case "setaugmenthtmlbelowto": A.find("div." + u.AugmentHtmlBelow).remove(), A.append("<div class='" + u.AugmentHtml + " " + u.AugmentHtmlBelow + "'>" + o + "</div>"); break; case "setaugmenthtmllabelaboveto": A.find("div." + u.AugmentHtmlLabelAbove).remove(), A.children("div." + u.Label).prepend("<div class='" + u.AugmentHtml + " " + u.AugmentHtmlLabelAbove + "'>" + o + "</div>"); break; case "setaugmenthtmllabelbelowto": A.find("div." + u.AugmentHtmlLabelBelow).remove(), A.children("div." + u.Label).append("<div class='" + u.AugmentHtml + " " + u.AugmentHtmlLabelBelow + "'>" + o + "</div>"); break; case "setaugmenthtmlfieldaboveto": A.find("div." + u.AugmentHtmlFieldAbove).remove(), v.prepend("<div class='" + u.AugmentHtml + " " + u.AugmentHtmlFieldAbove + "'>" + o + "</div>"); break; case "setaugmenthtmlfieldbelowto": A.find("div." + u.AugmentHtmlFieldBelow).remove(), v.append("<div class='" + u.AugmentHtml + " " + u.AugmentHtmlFieldBelow + "'>" + o + "</div>"); break; case "removeaugmenthtmlabove": A.find("div." + u.AugmentHtmlAbove).remove(); break; case "removeaugmenthtmlbelow": A.find("div." + u.AugmentHtmlBelow).remove(); break; case "removeaugmenthtmllabelabove": A.find("div." + u.AugmentHtmlLabelAbove).remove(); break; case "removeaugmenthtmllabelbelow": A.find("div." + u.AugmentHtmlLabelBelow).remove(); break; case "removeaugmenthtmlfieldabove": A.find("div." + u.AugmentHtmlFieldAbove).remove(); break; case "removeaugmenthtmlfieldbelow": A.find("div." + u.AugmentHtmlFieldBelow).remove(); break; case "setfieldvalueto": if (A.hasClass(u.ContainsHtmlField)) A.children("." + u.Field).html(o); else if ("radio" === g[r.type] || "checkbox" === g[r.type]) { var S = o.split(h.Checkbox_Value); v.each(function () { var e = jQuery(this); -1 !== S.indexOf(e.attr("value")) ? e.prop("checked", !0) : e.prop("checked", !1), e.trigger("actionchange") }) } else "button" === g[r.type] ? v.html(o).trigger("actionchange") : v.val(o).trigger("actionchange"); break; case "copyfieldvaluefrom": var R = o.split(h.Key), H = K(R.slice(0), a.FieldsInit[r.field_sets]), j = M(R.slice(0), a.Form, H); W(R.slice(0), s, H); var N = L(j); if (A.hasClass(u.ContainsHtmlField)) A.children("." + u.Field).html(N); else if ("radio" === g[r.type] || "checkbox" === g[r.type]) { var V = N.split(h.Checkbox_Value); v.each(function () { var e = jQuery(this); -1 !== V.indexOf(e.attr("value")) ? e.prop("checked", !0) : e.prop("checked", !1), e.trigger("actionchange") }) } else "button" === g[r.type] ? v.html(N).trigger("actionchange") : v.val(N).trigger("actionchange"); break; case "settochecked": ("radio" === v.attr("type") || "checkbox" === v.attr("type")) && (v.prop("checked", !0), v.trigger("actionchange")); break; case "settounchecked": ("radio" === v.attr("type") || "checkbox" === v.attr("type")) && (v.prop("checked", !1), v.trigger("actionchange")); break; case "checkall": v.length > 0 && v.prop("checked", !0).trigger("actionchange"); break; case "uncheckall": v.length > 0 && v.prop("checked", !1).trigger("actionchange"); break; case "updatefieldoptions": var q = []; try { o in a.CustomInputOptions ? q = a.CustomInputOptions[o](O(a).Values, a) : o in a.PreDefindedOptionsDict && (q = a.PreDefindedOptionsDict[o]) } catch (G) { e.console && console.log("JFS Error: Unable to parse custom input options: ", a.CustomInputOptions, G) } g[r.options] = eF(q), v.html(Z(q, "")).trigger("actionchange"); break; case "removeselectoption": var U = m[m.length - 1], J = v.attr("type"); if ("select" === J && !v.hasClass(u.KeyPrefix + U)) { var Y = parseInt(U), X = v.children("option"); X.length > Y && (X.eq(Y).remove(), delete g[r.options][Y], v.trigger("actionchange")) } break; case "setlabelto": A.find("div." + u.Label + " label, div." + u.Label + " legend").html(o); break; case "prependlabelwith": A.find("div." + u.Label + " label, div." + u.Label + " legend").prepend(o); break; case "appendlabelwith": A.find("div." + u.Label + " label, div." + u.Label + " legend").append(o); break; case "addclasstopair": A.addClass(o); break; case "removeclassfrompair": A.removeClass(o); break; case "togglepairclass": A.toggleClass(o); break; case "addclasstolabelcont": A.children("div." + u.Label).addClass(o); break; case "removeclassfromlabelcont": A.children("div." + u.Label).removeClass(o); break; case "togglelabelcontclass": A.children("div." + u.Label).toggleClass(o); break; case "addclasstolabel": A.children("div." + u.Label).children("label, legend").addClass(o); break; case "removeclassfromlabel": A.children("div." + u.Label).children("label, legend").removeClass(o); break; case "togglelabelclass": A.children("div." + u.Label).children("label, legend").toggleClass(o); break; case "addclasstofieldcont": A.children("div." + u.Field).addClass(o); break; case "removeclassfromfieldcont": A.children("div." + u.Field).removeClass(o); break; case "togglefieldcontclass": A.children("div." + u.Field).toggleClass(o); break; case "addclasstofield": v.addClass(o); break; case "removeclassfromfield": v.removeClass(o); break; case "togglefieldclass": v.toggleClass(o); break; case "removeelementwithselector": A.find(o).remove(); break; case "showfield": A.removeClass(u.Unshown), v.trigger("actionchange"), g[r.show] = "true"; break; case "hidefield": A.hasClass(u.Unshown) || A.addClass(u.Unshown), v.trigger("actionchange"), g[r.show] = "false"; break; case "scrollto": jQuery("html, body").animate({ scrollTop: A.offset().top }, "fast"); break; case "setfocusto": v.focus(); break; case "triggerbluron": v.blur() } } catch (Q) { e.console && console.log(Q) } } } function B(e, t, a, s) { if (r.fields in t) for (var i = t[r.fields], n = 0; n < i.length; n++) { var l = i[n]; if (r.field_sets in l) { var o = e + "/" + l[r.key]; if (r.control_btns in l) { for (var d = l[r.control_btns], u = 0; u < d.length; u++)if (r.key in d[u]) { var c = d[u]; if ("add" === c[r.key] && r.params in c) { for (var p = c[r.params], h = 0; h < p.length; h++)if ("values" === p[h][r.key] && r.param in p[h]) { var f = p[h][r.param][0]; void 0 !== f && (s[o] = f) } } } } a[o] = l[r.field_sets][0], B(o, l[r.field_sets][0], a, s) } } } function S(e, t, a, s, i, n) { var l = {}; s in n.RepeatableGroups.Adds && (l = eF(n.RepeatableGroups.Adds[s])); var o = [l], d = {}; s in n.RepeatableGroups.Values && (d = eF(n.RepeatableGroups.Values[s])), ei(o, eF([d]), e.join(h.Key), n), i ? a[r.field_sets].unshift(o[0]) : a[r.field_sets].push(o[0]); for (var c = 0; c < a[r.field_sets].length; c++)a[r.field_sets][c][r.key] = c.toString(); t.children("." + u.RepGrpSets).empty().html(V(a, e, !0, n)), $(t, n); var p = e.join(h.Key); j(["ongroupitemadd"], e, n); var f = _(p, n); for (var m in n.Interactions.Setting) 0 === m.indexOf(p) && (f = f.concat(_(m, n))); var b = O(n); "Changed" in n && n.Changed(t, s, null, null, b.Values, null, n, "usergroupitemadd"), I(f, n) } function R(t, a, s) { var i = t.parent().parent(), n = s.FieldsCurrent[r.field_sets], l = i.data(c.DATA_FormKeys), o = W(l.slice(0), n, !0), u = t.index(), p = [], f = !0; switch (a) { case "remove": var m = 0; if (r.mods in o) { var b = ec(o[r.mods]); if (d.Count in b) try { var A = eh(b[d.Count][r.params]); d.Min in A && (m = parseInt(A[d.Min])) } catch (v) { e.console && console.log("JFS Error: Error parsing repeatable group min count modifier", l, v) } } o[r.field_sets].length > m ? (o[r.field_sets].splice(u, 1), p.push("ongroupitemremove")) : f = !1; break; case "up": var g = u - 1; g > -1 && (N(o[r.field_sets], u, g), p.push("ongroupitemmove", "ongroupitemmoveup")); break; case "down": var F = u + 1; F < o[r.field_sets].length && (N(o[r.field_sets], u, F), p.push("ongroupitemmove", "ongroupitemmovedown")) }if (f) { var C = l.join(h.Key) + h.Key + u.toString(); "RepeatableGroupBeforeChange" in s ? s.RepeatableGroupBeforeChange(a, i, C, s, function () { H(l, i, o, C, p, a, s) }) : H(l, i, o, C, p, a, s) } } function H(e, t, a, s, i, n, l) { for (var o = 0; o < a[r.field_sets].length; o++)a[r.field_sets][o][r.key] = o + ""; !function e(t, a) { t.find("input, select, textarea").each(function () { var e = jQuery(this); void 0 !== jQuery.ui && (e.hasClass(u.Date) || e.hasClass(u.DateTime) || e.hasClass(u.DateTimeLocal)) && e.datepicker("destroy") }) }(t, l), t.children("." + u.RepGrpSets).empty().html(V(a, e, !0, l)), $(t, l), j(i, e, l); var d = _(e.join(h.Key), l), c = O(l); "Changed" in l && l.Changed(t, s, null, null, c.Values, null, l, "usergroupitem" + n), I(d, l) } function j(e, t, a) { var s = t.join(h.Key), i = a.Interactions.Setting; if (s in i) for (var n = 0; n < i[s].length; n++) { var l = !1, o = i[s][n][r.detections]; i[s][n][r.actions]; for (var d = 0; d < o.length; d++)-1 !== e.indexOf(o[d][r.detect]) && (l = !0); l ? r.actions in i[s][n] ? I(i[s][n][r.actions], a) : r.actions_true in i[s][n] && I(i[s][n][r.actions_true], a) : r.actions_false in i[s][n] && I(i[s][n][r.actions_false], a) } } function O(e) { var t = {}; t[r.values] = {}, e.ValuesKeys = [], e.ValuesUnfilled = []; for (var a = function e(t, a, s) { for (var i = [], n = 0; n < t.length; n++) { s.ValuesKeys[a] = t[n][r.key]; for (var l = t[n][r.fields], o = {}, u = 0; u < l.length; u++) { var c = l[u]; if ("button" !== c[r.type] && "html" !== c[r.type] && !(r.show in c && "false" === c[r.show]) && !(r.show in t[n] && "false" === t[n][r.show])) { if (r.field_sets in c) s.ValuesKeys[a + 1] = c[r.key], o[c[r.key]] = e(c[r.field_sets], a + 2, s); else { var p = r.field_value in c ? c[r.field_value] : ""; if (o[c[r.key]] = p, r.mods in c) { var f = ec(c[r.mods]); if (d.Req in f && "" === p) { var m = s.ValuesKeys.slice(0, a + 1); m.push(c[r.key]); var b = m.join(h.Key), A = {}; A[r.key] = b, A[r.param] = 'Sorry, the required field, "' + c[r.label] + '", appears to be unfilled.', r.param in f[d.Req] && (A[r.param] = f[d.Req][r.param]), s.ValuesUnfilled.push(A) } } } } } i.push(o) } return i }(e.FieldsCurrent[r.field_sets], 0, e), s = 0; s < a.length; s++)jQuery.isEmptyObject(a[s]) || (t[r.values][e.FieldsCurrent[r.field_sets][s][r.key]] = a[s]); return { Values: t, Unfilled: e.ValuesUnfilled } } function N(e, t, a) { e.splice(a, 0, e.splice(t, 1)[0]) } function W(e, t, a) { var s = t[0]; if (t.length > 1) for (var i = 0; i < t.length; i++)t[i][r.key] === e[0] && (s = t[i]); var n = s[r.fields], l = n[0]; if (n.length > 1) for (var o = 0; o < n.length; o++)n[o][r.key] === e[1] && (l = n[o]); return r.field_sets in l ? (e.shift(), e.shift(), a && 0 === e.length) ? l : l[r.field_sets].length < 1 ? {} : W(e, l[r.field_sets], a) : l[r.key] === e[1] ? l : {} } function K(e, t) { var a = t[0]; if (t.length > 1) for (var s = 0; s < t.length; s++)t[s][r.key] === e[0] && (a = t[s]); var i = a[r.fields], n = i[0]; if (i.length > 1) for (var l = 0; l < i.length; l++)i[l][r.key] === e[1] && (n = i[l]); return e.length <= 3 ? "repeatablegroup" === n[r.type] : (e.shift(), e.shift(), e[0] = "0", K(e, n[r.field_sets])) } function M(e, t, a) { var s = t; if (t.hasClass(u.Form)) s = t.children("." + u.KeyPrefix + e[0]); else if (t.hasClass(u.Set)) { var i = t.children("fieldset").children("." + u.ContainsFieldPrefix + e[0]); i.hasClass(u.ContainsGroup) ? (s = a && 1 === e.length ? i : i.children("div." + u.Group).children("div." + u.RepGrpSets).children("." + u.KeyPrefix + e[1]), e.shift()) : s = a ? i : i.find("[data-" + c.DATA_FieldName + '="' + e[0] + '"]') } else t.length > 1 && (s = s.eq(e[0])); return e.length <= 1 ? s : (e.shift(), M(e, s, a)) } function E(e, t) { return jQuery("#" + t.ContainerId + " form > div." + u.ContainsSetPrefix + e) } function V(e, t, a, s) { var i = "", n = e; a && (n = e[r.field_sets]); for (var l = 0; l < n.length; l++) { var o, c = n[l], p = l + ""; r.key in c && (p = c[r.key]); var h = []; h.push(u.KeyPrefix + p); var f = [], m = {}; r.mods in c && (m = ec(c[r.mods])), d.AddClass in m && h.push(m[d.AddClass][r.param]), d.AddDataAttrs in m && r.params in m[d.AddDataAttrs] && (f = ef(m[d.AddDataAttrs][r.params])); var b = ""; if (r.show in c && "false" === c[r.show] && h.push(u.Unshown), r.fields in c) { var A = {}; if (r.mods_group_fields in e) for (var v = e[r.mods_group_fields], g = 0; g < v.length; g++)r.key in v[g] && r.mods in v[g] && (A[v[g][r.key]] = v[g][r.mods]); for (var F = c[r.fields], C = 0; C < F.length; C++) { if (a) { var y = l + "/" + F[C][r.key]; y in A && (r.mods in F[C] ? F[C][r.mods] = ep(F[C][r.mods].slice(0), A[y]) : F[C][r.mods] = A[y]) } b += G(F[C], t, p, a, s) } } i += q(a ? "repgrpset" : "set", a ? e : c, l, h, f, [], b, s) } return i } function q(e, t, s, i, n, l, o, c) { if (i.push(u.Container), e in c.CustomContainers) o = c.CustomContainers[e](i, o, c); else switch (e) { case "form": if (i.push(u.Form), r.mods in c.FieldsInit) { var p = ec(c.FieldsInit[r.mods]); if (d.AddClass in p && r.param in p[d.AddClass] && "" !== p[d.AddClass][r.param]) for (var h = p[d.AddClass][r.param].split(" "), f = 0; f < h.length; f++)i.push(h[f]); d.AddDataAttrs in p && r.params in p[d.AddDataAttrs] && (n = ef(p[d.AddDataAttrs][r.params])) } n.push(eo("class", i.join(" "))), n.push(eo("autocomplete", c.AutoComplete ? "on" : "off")), c.NoValidate && n.push(eo("novalidate", "novalidate")), c.IncludeAutoCompleteTrigger && (n.push(eo("method", "GET")), n.push(eo("action", m + a)), n.push(eo("target", "jfs_trigger_browser_autocomplete_iframe"))), o = "<form " + n.join(" ") + ">" + o, c.IncludeAutoCompleteTrigger ? (o += "<button class='" + u.AutoCompleteTriggerButton + "' type='submit' class='jfs_display_none'></button></form>", o += "<iframe id='jfs_trigger_browser_autocomplete_iframe' name='jfs_trigger_browser_autocomplete_iframe' class='jfs_display_none' src='" + m + a + "'></iframe>") : o += "</form>"; break; case "set": if (i.push(u.Set), i.push(u.ContainsSetPrefix + t[r.key]), r.mods in t) { var b = ec(t[r.mods]); if (d.AddClass in b && r.param in b[d.AddClass] && "" !== b[d.AddClass][r.param]) for (var A = b[d.AddClass][r.param].split(" "), v = 0; v < A.length; v++)i.push(A[v]) } n.push(eo("class", i.join(" "))); var g = "<div " + n.join(" ") + "><fieldset>"; r.legend in t && (g += "<legend>" + t[r.legend] + "</legend>"), o = g + o + "</fieldset></div>"; break; case "repgrpset": i.push(u.Set), n.push(eo("class", i.join(" "))); var F = t[r.field_sets][s], C = J(t, !1, c), y = "<div " + n.join(" ") + "><fieldset>"; r.legend in F && (y += "<legend>" + F[r.legend] + " (" + parseInt(s + 1) + ")</legend>"), "" !== C.above && (y += '<div class="' + u.RepGrpCtrlBtns + " " + u.RepGrpCtrlBtns + '_above">' + C.above + "</div>"), y += o, "" !== C.below && (y += '<div class="' + u.RepGrpCtrlBtns + " " + u.RepGrpCtrlBtns + '_below">' + C.below + "</div>"), y += "</fieldset></div>", o = y; break; case "pair": var $ = ec(r.mods in t ? t[r.mods] : []), k = U($); d.AddClassToPair in $ && r.param in $[d.AddClassToPair] && i.push($[d.AddClassToPair][r.param]), i.push(u.Pair), n.push(eo("class", i.join(" "))); var T = "radio" === t[r.type] || "checkbox" === t[r.type], L = "<div " + n.join(" ") + ">"; "" !== k.above && (L += "<div class='" + u.AugmentHtml + " " + u.AugmentHtmlAbove + "'>" + k.above + "</div>"), T && (L += "<fieldset " + l.join(" ") + ">"), L += o, T && (L += "</fieldset>"), "" !== k.below && (L += "<div class='" + u.AugmentHtml + " " + u.AugmentHtmlBelow + "'>" + k.below + "</div>"), L += "</div>", o = L; break; case "group": i.push(u.Group), n.push(eo("class", i.join(" "))); var D = J(t, !0, c), w = "<div " + n.join(" ") + ">"; "" !== D.above && (w += '<div class="' + u.RepGrpBtns + " " + u.RepGrpBtns + '_above">' + D.above + "</div>"), w += '<div class="' + u.RepGrpSets + '">' + o + "</div>", "" !== D.below && (w += '<div class="' + u.RepGrpBtns + " " + u.RepGrpBtns + '_below">' + D.below + "</div>"), w += "</div>", o = w; break; case "label": var x = ec(r.mods in t ? t[r.mods] : []), _ = U(x); d.AddClassToLabelContainer in x && r.param in x[d.AddClassToLabelContainer] && i.push(x[d.AddClassToLabelContainer][r.param]), i.push(u.Label), n.push(eo("class", i.join(" "))); var P = "<div " + n.join(" ") + ">"; "" !== _.label_above && (P += "<div class='" + u.AugmentHtml + " " + u.AugmentHtmlLabelAbove + "'>" + _.label_above + "</div>"), P += o, "" !== _.label_below && (P += "<div class='" + u.AugmentHtml + " " + u.AugmentHtmlLabelBelow + "'>" + _.label_below + "</div>"), P += "</div>", o = P; break; case "field": var I = ec(r.mods in t ? t[r.mods] : []), B = U(I); d.AddClassToFieldContainer in I && r.param in I[d.AddClassToFieldContainer] && i.push(I[d.AddClassToFieldContainer][r.param]), i.push(u.Field), n.push(eo("class", i.join(" "))); var S = "<div " + n.join(" ") + ">"; "" !== B.field_above && (S += "<div class='" + u.AugmentHtml + " " + u.AugmentHtmlFieldAbove + "'>" + B.field_above + "</div>"), S += o, "" !== B.field_below && (S += "<div class='" + u.AugmentHtml + " " + u.AugmentHtmlFieldBelow + "'>" + B.field_below + "</div>"), S += "</div>", o = S }return o } function G(t, a, i, n, l) { var o = ""; if (r.key in t && r.type in t) { var p, f, m, b, A, v, g, F, C, y, $, k, T, L, D, w, x, _, P, I, B, S, R, H, j, N, W, K, M = !0, E = [], G = [], U = []; E.push(u.KeyPrefix + t[r.key]), U.push(u.KeyPrefix + t[r.key]), G.push(u.FieldTypePrefix + t[r.type]), G.push(u.ContainsFieldPrefix + t[r.key]), n && E.push(u.InRepGrp); var J = [], z = {}; r.mods in t && (z = ec(t[r.mods])); var ea = ""; (d.Req in z || d.ReqCustom in z) && (ea = l.LabelRequiredString), d.AddClass in z && r.param in z[d.AddClass] && G.push(z[d.AddClass][r.param]), d.AddDataAttrs in z && r.params in z[d.AddDataAttrs] && (J = ef(z[d.AddDataAttrs][r.params])); var es = l.LabelPosition; r.label_position in t && (es = t[r.label_position]), E.push(u.LabelPositionPrefix + es), U.push(u.LabelPositionPrefix + es); var ei = a.slice(0); if (ei.push(i, t[r.key]), t[r.type] in l.CustomFields) K = l.CustomFields[t[r.type]](t, E, z, l); else switch (t[r.type]) { case "text": K = Y(t, E, z, ei, l); break; case "textarea": K = (p = t, f = E, m = z, b = ei, A = l, v = { FieldCont: "field", FieldAttrs: [], FieldClassList: f, WidthFill: !0, Html: "", FieldContClassList: [], LabelContClassList: [], PairContClassList: [] }, g = f.slice(0), F = "", v.FieldAttrs.push(eo("id", er(b, A))), v.FieldAttrs.push(eo("name", p[r.key])), v.FieldAttrs.push(ed(c.DATA_FieldName, p[r.key])), v.FieldAttrs.push(eo("type", "textarea")), v.FieldAttrs.push(ed(c.DATA_FormKeys, b)), r.title in p && v.FieldAttrs.push(eo(c.Title, p[r.title])), r.disabled in p && "true" === p[r.disabled] && v.FieldAttrs.push(c.Disabled), d.AddClassToField in m && r.param in m[d.AddClassToField] && g.push(m[d.AddClassToField][r.param]), r.placeholder in p && v.FieldAttrs.push(eo(c.PlaceHolder, p[r.placeholder])), r.autofocus in p && v.FieldAttrs.push(c.AutoFocus), A.UseHtml5Required && d.Req in m && (v.FieldAttrs.push(c.Required), et(v, m)), r.field_value in p && (F = p[r.field_value]), v = X([d.AddClass, d.AddDataAttrs, d.WidthFillWrap, d.Length, d.AllowChars, d.PreventChars, d.CharCounter, d.WordCounter], m, v), C = ee(b, m, !0, A), v.Html += C.above + C.left + C.right + Q("textarea", A, v.FieldClassList.concat(g), v.FieldAttrs, v.WidthFill, F) + C.below, v); break; case "select": K = function e(t, a, s, i, n) { var l = { FieldCont: "field", FieldAttrs: [], FieldClassList: a, WidthFill: !0, Html: "", FieldContClassList: [], LabelContClassList: [], PairContClassList: [] }, o = a.slice(0), u = ""; l.FieldAttrs.push(eo("id", er(i, n))), l.FieldAttrs.push(eo("name", t[r.key])), l.FieldAttrs.push(ed(c.DATA_FieldName, t[r.key])), l.FieldAttrs.push(eo("type", "select")), l.FieldAttrs.push(ed(c.DATA_FormKeys, i)), r.title in t && l.FieldAttrs.push(eo(c.Title, t[r.title])), r.disabled in t && "true" === t[r.disabled] && l.FieldAttrs.push(c.Disabled), d.AddClassToField in s && r.param in s[d.AddClassToField] && o.push(s[d.AddClassToField][r.param]), r.autofocus in t && l.FieldAttrs.push(c.AutoFocus), n.UseHtml5Required && d.Req in s && (l.FieldAttrs.push(c.Required), et(l, s)), r.field_value in t && (u = t[r.field_value]), l = X([d.AddClass, d.AddDataAttrs, d.WidthFillWrap], s, l); var p = ""; if (r.options in t) { var h = t[r.options]; "string" == typeof h ? h in n.CustomInputOptions ? p = Z(n.CustomInputOptions[h](O(n).Values, n), u) : h in n.PreDefindedOptionsDict && (p = Z(n.PreDefindedOptionsDict[h], u)) : p = Z(h, u) } else if (r.options_predefined in t) { var f = t[r.options_predefined]; f in n.CustomInputOptions ? p = Z(n.CustomInputOptions[f](O(n).Values, n), u) : f in n.PreDefindedOptionsDict && (p = Z(n.PreDefindedOptionsDict[f], u)) } var m = ee(i, s, !0, n); return l.Html += m.above + m.left + m.right + Q("select", n, l.FieldClassList.concat(o), l.FieldAttrs, l.WidthFill, p) + m.below, l }(t, E, z, ei, l); break; case "radio": K = function e(t, a, s, i, n) { var l = { FieldCont: "field", FieldAttrs: [], FieldClassList: a, WidthFill: !1, Html: "", FieldContClassList: [], LabelContClassList: [], PairContClassList: [], FieldsetAttrs: [] }, o = a.slice(0), p = "", h = er(i, n); l.FieldAttrs.push(eo("type", "radio")), r.title in t && l.FieldsetAttrs.push(eo(c.Title, t[r.title])), d.AddClassToField in s && r.param in s[d.AddClassToField] && o.push(s[d.AddClassToField][r.param]), r.autofocus in t && l.FieldAttrs.push(c.AutoFocus), r.field_value in t && (p = t[r.field_value]), l.FieldContClassList.push(u.Field + "_radio"); var f = r.disabled in t && "true" === t[r.disabled]; l = X([d.AddClass, d.AddDataAttrs, d.WidthFillWrap], s, l); var m = n.InlineOptions; r.inline in t && (m = "true" === t[r.inline]); var b = n.OptionLabelPosition; r.option_label_position in t && (b = t[r.option_label_position]); var A = []; if (r.options in t) "string" == typeof (A = t[r.options]) && (A in n.CustomInputOptions ? A = n.CustomInputOptions[A](O(n).Values, n) : A in n.PreDefindedOptionsNoEmptyDict && (A = n.PreDefindedOptionsNoEmptyDict[A])); else if (r.options_predefined in t) { var v = t[r.options_predefined]; v in n.CustomInputOptions ? A = n.CustomInputOptions[v](O(n).Values, n) : v in n.PreDefindedOptionsNoEmptyDict && (A = n.PreDefindedOptionsNoEmptyDict[v]) } for (var g = 0; g < A.length; g++) { var F = A[g], C = [], y = { above: "", right: "", below: "", left: "" }; y[b] = "<span>" + F[r.label] + "</span>", C.push(u.RadioLabel), C.push(u.RadioLabel + "_" + b); var $ = l.FieldAttrs.slice(0), k = i.slice(0), T = i.slice(0); k.push(g), T.push(g); var L = {}; r.mods in F && (L = ec(F[r.mods])), d.AddClass in L && r.param in L[d.AddClass] && C.push(L[d.AddClass][r.param]), d.AddDataAttrs in L && r.params in L[d.AddDataAttrs] && ($ = $.concat(ef(L[d.AddDataAttrs][r.params]))), m ? C.push(u.InlineOpt) : C.push(u.BlockOpt); var D = i.slice(1), w = D.length > 1 ? D[D.length - 2] + "_" + t[r.key] : t[r.key]; $.push(ed(c.DATA_FormKeys, T)), $.push(ed(c.DATA_FieldName, t[r.key])), $.push(eo("id", h + "_" + parseInt(g + 1))), $.push(eo("name", w)), $.push(eo("value", F[r.value])); var x = f; r.disabled in F && (x = "true" === F[r.disabled]), x && $.push(c.Disabled), n.UseHtml5Required && d.Req in s && (l.FieldAttrs.push(c.Required), et(l, s)), F[r.value] === p && $.push(c.Checked), l.Html += "<label " + eo("class", C.join(" ")) + ">", l.Html += y.left + y.above + Q("input", n, l.FieldClassList.concat(o), $, l.WidthFill) + y.right + y.below, l.Html += "</label>" } return l }(t, E, z, ei, l); break; case "checkbox": K = function e(t, a, s, i, n) { var l = { FieldCont: "field", FieldAttrs: [], FieldClassList: a, WidthFill: !1, Html: "", FieldContClassList: [], LabelContClassList: [], PairContClassList: [], FieldsetAttrs: [] }, o = a.slice(0), p = [], f = er(i, n); l.FieldAttrs.push(eo("type", "checkbox")), r.title in t && l.FieldsetAttrs.push(eo(c.Title, t[r.title])), d.AddClassToField in s && r.param in s[d.AddClassToField] && o.push(s[d.AddClassToField][r.param]), r.autofocus in t && l.FieldAttrs.push(c.AutoFocus), r.field_value in t && (p = t[r.field_value].split(h.Checkbox_Value)), l.FieldContClassList.push(u.Field + "_checkbox"); var m = r.disabled in t && "true" === t[r.disabled]; l = X([d.AddClass, d.AddDataAttrs, d.WidthFillWrap], s, l); var b = n.InlineOptions; r.inline in t && (b = "true" === t[r.inline]); var A = n.OptionLabelPosition; r.option_label_position in t && (A = t[r.option_label_position]); var v = []; if (r.options in t) "string" == typeof (v = t[r.options]) && (v in n.CustomInputOptions ? v = n.CustomInputOptions[v](O(n).Values, n) : v in n.PreDefindedOptionsNoEmptyDict && (v = n.PreDefindedOptionsNoEmptyDict[v])); else if (r.options_predefined in t) { var g = t[r.options_predefined]; g in n.CustomInputOptions ? v = n.CustomInputOptions[g](O(n).Values, n) : g in n.PreDefindedOptionsNoEmptyDict && (v = n.PreDefindedOptionsNoEmptyDict[g]) } for (var F = 0; F < v.length; F++) { var C = v[F], y = [], $ = { above: "", right: "", below: "", left: "" }; $[A] = "<span>" + C[r.label] + "</span>", y.push(u.CheckboxLabel), y.push(u.CheckboxLabel + "_" + A); var k = l.FieldAttrs.slice(0), T = i.slice(0), L = i.slice(0); T.push(F), L.push(F); var D = {}; r.mods in C && (D = ec(C[r.mods])), d.AddClass in D && r.param in D[d.AddClass] && y.push(D[d.AddClass][r.param]), d.AddDataAttrs in D && r.params in D[d.AddDataAttrs] && (k = k.concat(ef(D[d.AddDataAttrs][r.params]))), b ? y.push(u.InlineOpt) : y.push(u.BlockOpt); var w = i.slice(1), x = w.length > 1 ? w[w.length - 2] + "_" + t[r.key] : t[r.key]; k.push(ed(c.DATA_FormKeys, L)), k.push(ed(c.DATA_FieldName, t[r.key])), k.push(eo("id", f + "_" + parseInt(F + 1))), k.push(eo("name", x)), k.push(eo("value", C[r.value])); var _ = m; r.disabled in C && (_ = "true" === C[r.disabled]), _ && k.push(c.Disabled), n.UseHtml5Required && d.Req in s && (l.FieldAttrs.push(c.Required), et(l, s)), -1 !== p.indexOf(C[r.value]) && k.push(c.Checked), l.Html += "<label " + eo("class", y.join(" ")) + ">", l.Html += $.left + $.above + Q("input", n, l.FieldClassList.concat(o), k, l.WidthFill) + $.right + $.below, l.Html += "</label>" } return l }(t, E, z, ei, l); break; case "password": K = (y = t, $ = E, k = z, T = ei, L = l, D = { FieldCont: "field", FieldAttrs: [], FieldClassList: $, WidthFill: !0, Html: "", FieldContClassList: [], LabelContClassList: [], PairContClassList: [] }, w = $.slice(0), D.FieldAttrs.push(eo("id", er(T, L))), D.FieldAttrs.push(eo("name", y[r.key])), D.FieldAttrs.push(ed(c.DATA_FieldName, y[r.key])), D.FieldAttrs.push(eo("type", "password")), D.FieldAttrs.push(ed(c.DATA_FormKeys, T)), r.title in y && D.FieldAttrs.push(eo(c.Title, y[r.title])), r.disabled in y && "true" === y[r.disabled] && D.FieldAttrs.push(c.Disabled), d.AddClassToField in k && r.param in k[d.AddClassToField] && w.push(k[d.AddClassToField][r.param]), r.autofocus in y && D.FieldAttrs.push(c.AutoFocus), r.autocomplete in y && D.FieldAttrs.push(eo(c.AutoComplete, "true" === y[r.autocomplete] ? "on" : "off")), L.UseHtml5Required && d.Req in k && (D.FieldAttrs.push(c.Required), et(D, k)), L.UseLabelsAsFieldTitles && r.label in y && "" !== y[r.label] && D.FieldAttrs.push(eo(c.Title, y[r.label])), r.field_value in y && D.FieldAttrs.push(eo("value", y[r.field_value])), D = X([d.AddClass, d.AddDataAttrs, d.WidthFillWrap, d.Length, d.AllowChars, d.PreventChars], k, D), x = ee(T, k, !0, L), D.Html += x.above + x.left + x.right + Q("input", L, D.FieldClassList.concat(w), D.FieldAttrs, D.WidthFill) + x.below, D); break; case "hidden": K = (_ = t, P = E, I = z, B = ei, S = l, R = { FieldCont: "field", FieldAttrs: [], FieldClassList: P, WidthFill: !1, Html: "", FieldContClassList: [], LabelContClassList: [], PairContClassList: [] }, H = P.slice(0), R.FieldAttrs.push(eo("id", er(B, S))), R.FieldAttrs.push(eo("name", _[r.key])), R.FieldAttrs.push(ed(c.DATA_FieldName, _[r.key])), R.FieldAttrs.push(eo("type", "hidden")), R.FieldAttrs.push(ed(c.DATA_FormKeys, B)), d.AddClassToField in I && r.param in I[d.AddClassToField] && H.push(I[d.AddClassToField][r.param]), r.field_value in _ && R.FieldAttrs.push(eo("value", _[r.field_value])), R = X([d.AddClass, d.AddDataAttrs, d.WidthFillWrap], I, R), R.Html += Q("input", S, R.FieldClassList.concat(H), R.FieldAttrs, R.WidthFill), R), G.push(u.ContainsHiddenField); break; case "old-browser-number": E.push(u.Field + "_input_number"), K = Y(t, E, z, ei, l); break; case "old-browser-date": case "old-browser-datetime": case "old-browser-datetime-local": K = function e(t, a, s, i, n) { var l = { FieldCont: "field", FieldAttrs: [], FieldClassList: a, WidthFill: !0, Html: "", FieldContClassList: [], LabelContClassList: [], PairContClassList: [] }, o = a.slice(0); switch (l.FieldAttrs.push(eo("id", er(i, n))), l.FieldAttrs.push(eo("name", t[r.key])), l.FieldAttrs.push(ed(c.DATA_FieldName, t[r.key])), l.FieldAttrs.push(eo("type", "text")), l.FieldAttrs.push(ed(c.DATA_FormKeys, i)), r.title in t && l.FieldAttrs.push(eo(c.Title, t[r.title])), r.disabled in t && "true" === t[r.disabled] && l.FieldAttrs.push(c.Disabled), d.AddClassToField in s && r.param in s[d.AddClassToField] && o.push(s[d.AddClassToField][r.param]), r.placeholder in t && l.FieldAttrs.push(eo(c.PlaceHolder, t[r.placeholder])), r.autofocus in t && l.FieldAttrs.push(c.AutoFocus), n.UseHtml5Required && d.Req in s && (l.FieldAttrs.push(c.Required), et(l, s)), n.UseLabelsAsFieldTitles && r.label in t && "" !== t[r.label] && l.FieldAttrs.push(eo(c.Title, t[r.label])), r.field_value in t && l.FieldAttrs.push(eo("value", t[r.field_value])), l = X([d.AddClass, d.AddDataAttrs, d.WidthFillWrap], s, l), t[r.type]) { case "date": l.FieldClassList.push(u.Date); break; case "datetime": l.FieldClassList.push(u.DateTime); break; case "datetime-local": l.FieldClassList.push(u.DateTimeLocal) }var p = {}; return jQuery.each(s, function (e, t) { var a = t[r.param]; r.type in t && ("int" === t[r.type] && (a = parseInt(a)), "bool" === t[r.type] && (a = "true" === a.toLowerCase())), p[e] = a }), l.FieldAttrs.push(ed(c.DATA_DTPicker, p)), l.Html += Q("input", n, l.FieldClassList.concat(o), l.FieldAttrs, l.WidthFill), l }(t, E, z, ei, l); break; case "button": K = function t(a, s, i, n, l) { var o = { FieldCont: "field", FieldAttrs: [], FieldClassList: s, WidthFill: !0, Html: "", FieldContClassList: [], LabelContClassList: [], PairContClassList: [] }, p = s.slice(0); o.FieldAttrs.push(eo("id", er(n, l))), o.FieldAttrs.push(eo("name", a[r.key])), o.FieldAttrs.push(ed(c.DATA_FieldName, a[r.key])), o.FieldAttrs.push(eo("type", "button")), o.FieldAttrs.push(ed(c.DATA_FormKeys, n)), r.title in a && o.FieldAttrs.push(eo(c.Title, a[r.title])), r.disabled in a && "true" === a[r.disabled] && o.FieldAttrs.push(c.Disabled), d.AddClassToField in i && r.param in i[d.AddClassToField] && p.push(i[d.AddClassToField][r.param]), r.autofocus in a && o.FieldAttrs.push(c.AutoFocus), l.UseLabelsAsFieldTitles && r.label in a && "" !== a[r.label] && o.FieldAttrs.push(eo(c.Title, a[r.label])), r.field_value in a && o.FieldAttrs.push(eo("value", a[r.field_value])), o.FieldClassList.push(u.Btn), o = X([d.AddClass, d.AddDataAttrs, d.WidthFillWrap], i, o); var h = "", f = "", m = l.IconLabelPosition, b = "", A = ""; try { d.ButtonText in i && (h = i[d.ButtonText][r.param]), d.ButtonIcon in i && (f = i[d.ButtonIcon][r.param]), d.ButtonIconLabelPosition in i && (m = i[d.ButtonIconLabelPosition][r.param]), d.ButtonFunction in i && (b = i[d.ButtonFunction][r.param]), d.ButtonFunctionParam in i && (A = i[d.ButtonFunctionParam][r.param]) } catch (v) { e.console && console.log("JFS Error: Error parsing button field modifiers.", n, v) } var g = "", F = ""; return "" !== h && o.FieldClassList.push(u.Btn + "_label_" + m), "" !== f && (F = "<img src='" + f + "' " + eo("alt", "Icon: " + ("" === h ? "Button" : h)) + "/>", o.FieldClassList.push(u.Btn + "_icon")), g = "left" === m ? h + F : F + h, o.FieldAttrs.push(ed(c.DATA_BtnFunct, b)), o.FieldAttrs.push(ed(c.DATA_BtnFunctParam, A)), o.FieldAttrs.push(ed(c.DATA_FormKeys, n)), o.Html += Q("button", l, o.FieldClassList.concat(p), o.FieldAttrs, o.WidthFill, g), o }(t, E, z, ei, l); break; case "html": K = (j = t, N = z, W = "", r.field_value in j && (W = j[r.field_value]), { FieldCont: "field", FieldContClassList: [], LabelContClassList: [], PairContClassList: [], Html: W }), G.push(u.ContainsHtmlField); break; case "repeatablegroup": K = { FieldCont: "group", FieldAttrs: [], FieldClassList: E, WidthFill: !0, Html: V(t, ei, !0, l), FieldContClassList: [], LabelContClassList: [], PairContClassList: [u.ContainsGroup] }, J.push(ed(c.DATA_FormKeys, ei)), K = X([], z, K); break; default: -1 !== s.indexOf(t[r.type]) ? K = function t(a, s, i, n, l, o, p) { var h = { FieldCont: "field", FieldAttrs: [], FieldClassList: n, WidthFill: !0, Html: "", FieldContClassList: [], LabelContClassList: [], PairContClassList: [] }, f = n.slice(0); if (h.FieldAttrs.push(eo("id", er(o, p))), h.FieldAttrs.push(eo("name", i[r.key])), h.FieldAttrs.push(ed(c.DATA_FieldName, i[r.key])), h.FieldAttrs.push(eo("type", a)), h.FieldAttrs.push(ed(c.DATA_FormKeys, o)), r.title in i && h.FieldAttrs.push(eo(c.Title, i[r.title])), r.disabled in i && "true" === i[r.disabled] && h.FieldAttrs.push(c.Disabled), d.AddClassToField in l && r.param in l[d.AddClassToField] && f.push(l[d.AddClassToField][r.param]), r.placeholder in i && h.FieldAttrs.push(eo(c.PlaceHolder, i[r.placeholder])), r.autofocus in i && h.FieldAttrs.push(c.AutoFocus), r.autocomplete in i && h.FieldAttrs.push(eo(c.AutoComplete, "true" === i[r.autocomplete] ? "on" : "off")), p.UseHtml5Required && d.Req in l && (h.FieldAttrs.push(c.Required), et(h, l)), p.UseLabelsAsFieldTitles && r.label in i && "" !== i[r.label] && h.FieldAttrs.push(eo(c.Title, i[r.label])), r.field_value in i && h.FieldAttrs.push(eo("value", i[r.field_value])), h = X([d.AddClass, d.AddDataAttrs, d.WidthFillWrap], l, h), d.Min in l) try { h.FieldAttrs.push(eo("min", l[d.Min][r.param])) } catch (m) { e.console && console.log("JFS Error: Error parsing minimum modifier.", o, m) } if (d.Max in l) try { h.FieldAttrs.push(eo("max", l[d.Max][r.param])) } catch (b) { e.console && console.log("JFS Error: Error parsing maximum modifier.", o, b) } h.FieldClassList.push(u.Field + "_input_" + a); var A = ee(o, l, s, p); return h.Html += A.above + A.left + A.right + Q("input", p, h.FieldClassList.concat(f), h.FieldAttrs, h.WidthFill) + A.below, h }(t[r.type], !0, t, E, z, ei, l) : M = !1 }r.show in t && "false" === t[r.show] && G.push(u.Unshown); var en = ""; if (M) { var el = { above: "", right: "", below: "", left: "" }; el[es] = function t(a, s, i, n, l, o) { var c = ""; if (r.label in a) { var p = [], h = [], f = ""; if (d.InfoBub in n) try { var m = eh(n[d.InfoBub][r.params]), b = "icon" in m ? m.icon : o.InfoBubbleIcon; "" !== b && (f = '<span class="' + u.InfoBub + '">', f += '<img class="' + u.InfoBub + '" src="' + b + '" alt="Additional Info Icon" />', f += "<span>" + m.html + "</span>", f += "</span>") } catch (A) { e.console && console.log("JFS Error: Error parsing info bubble modifier.", l, A) } var v = o.LabelSuffix; if (d.LabelSuffix in n) try { v = n[d.LabelSuffix][r.param] } catch (g) { e.console && console.log("JFS Error: Error parsing label suffix modifier.", l, g) } var F = a[r.label] + v, C = jQuery("<div/>").html(a[r.label]).text(); if ("" !== s) { i.push(u.Req); var y = o.LabelRequiredPrepend; if (d.ReqPrepend in n) try { y = "true" === n[d.ReqPrepend][r.param] } catch ($) { e.console && console.log("JFS Error: Error parsing label required prepend modifier.", l, $) } y ? (F = s + F, C = s + C) : (F += s, C += s) } F += f, d.AddClassToLabel in n && r.param in n[d.AddClassToLabel] && p.push(n[d.AddClassToLabel][r.param]), h.push(eo("class", p.join(" "))), F = "radio" === a[r.type] || "checkbox" === a[r.type] ? "<legend " + h.join(" ") + ">" + F + "</legend>" : "repeatablegroup" === a[r.type] ? "<p " + h.join(" ") + ">" + F + "</p>" : '<label for="' + er(l, o) + '" ' + h.join(" ") + ">" + F + "</label>", c = q("label", a, 0, i, [], [], F, o) } return c }(t, ea, U.concat(K.LabelContClassList), z, ei, l), d.CharCounter in z && (K.Html += '<span class="' + u.CharCounterText + '">0 characters</span>'), d.WordCounter in z && (K.Html += '<span class="' + u.WordCounterText + '">0 words</span>'), en += el.above + el.left + el.right, en += q(K.FieldCont, t, 0, E.concat(K.FieldContClassList), J, [], K.Html, l), en += el.below, G = G.concat(K.PairContClassList) } else en = "<p style='color: red; text-align: center;'>OH, SNAP! The field type, \"" + t[r.type] + '" was not found so this field cannot be rendered.</p>'; var eu = []; "FieldsetAttrs" in K && (eu = K.FieldsetAttrs), o = q("pair", t, 0, G, [], eu, en, l) } return o } function U(e) { var t = { above: "", below: "", label_above: "", label_below: "", field_above: "", field_below: "" }; if (d.AugmentHtml in e && r.params in e[d.AugmentHtml]) { for (var a = e[d.AugmentHtml][r.params], s = 0; s < a.length; s++)if (r.key in a[s] && r.param in a[s]) switch (a[s][r.key]) { case "html_above": t.above = a[s][r.param]; break; case "html_below": t.below = a[s][r.param]; break; case "html_label_above": t.label_above = a[s][r.param]; break; case "html_label_below": t.label_below = a[s][r.param]; break; case "html_field_above": t.field_above = a[s][r.param]; break; case "html_field_below": t.field_below = a[s][r.param] } } return t } function J(t, a, s) { var i = { above: "", below: "" }; if (r.control_btns in t) for (var l = t[r.control_btns], o = 0; o < l.length; o++)try { if (r.key in l[o]) { var d = l[o], p = d[r.key], h = "above", f = "", m = "", b = "", A = s.IconLabelPosition, v = "append", g = "add" === p; if (a) { if (!g) continue } else if (g) continue; if (p in s.RepeatableGroupIcons && (b = s.RepeatableGroupIcons[p]), r.params in d) for (var F = d[r.params], C = 0; C < F.length; C++) { var y = F[C][r.param]; switch (F[C][r.key]) { case "add_location": v = y; break; case "btn_position": h = y; break; case "label": f = y; break; case "title": m = y; break; case "icon": b = y; break; case "icon_label_position": A = y } } if ("" === m) switch (p) { case "add": m = "Add"; break; case "remove": m = "Remove"; break; case "up": m = "Move Up"; break; case "down": m = "Move Down"; break; case "drag": m = "Drag to Reposition"; break; default: m = "Button" }var $ = []; $.push(u.RepGrpBtn), $.push(u.RepGrpBtn + "_" + p); var k = []; k.push(eo("title", m)), g && k.push(ed(c.DATA_RepGrpBtnAddLoc, v)); var T = "", L = ""; "" !== f && $.push(u.RepGrpBtn + "_label_" + A), "" !== b && (L = "<img src='" + b + "' " + eo("alt", "Icon: " + m) + "/>", $.push(u.RepGrpBtn + "_icon")), T = "left" === A ? f + L : L + f, k.push(eo("class", $.join(" "))), "drag" === p && void 0 !== jQuery.ui && (s.Interface = n[0]) ? i[h] += "<span " + k.join(" ") + ">" + T + "</span>" : (k.push(eo("type", "button")), i[h] += "<button " + k.join(" ") + ">" + T + "</button>") } } catch (D) { e.console && console.log("JFS Error: Error parsing repeatable group buttons.", t, D) } return i } function Y(e, t, a, s, i) { var n = { FieldCont: "field", FieldAttrs: [], FieldClassList: t, WidthFill: !0, Html: "", FieldContClassList: [], LabelContClassList: [], PairContClassList: [] }, l = t.slice(0); n.FieldAttrs.push(eo("id", er(s, i))), n.FieldAttrs.push(eo("name", e[r.key])), n.FieldAttrs.push(ed(c.DATA_FieldName, e[r.key])), n.FieldAttrs.push(eo("type", "text")), n.FieldAttrs.push(ed(c.DATA_FormKeys, s)), r.title in e && n.FieldAttrs.push(eo(c.Title, e[r.title])), r.disabled in e && "true" === e[r.disabled] && n.FieldAttrs.push(c.Disabled), d.AddClassToField in a && r.param in a[d.AddClassToField] && l.push(a[d.AddClassToField][r.param]), r.placeholder in e && n.FieldAttrs.push(eo(c.PlaceHolder, e[r.placeholder])), r.autofocus in e && n.FieldAttrs.push(c.AutoFocus), r.autocomplete in e && n.FieldAttrs.push(eo(c.AutoComplete, "true" === e[r.autocomplete] ? "on" : "off")), i.UseHtml5Required && d.Req in a && (n.FieldAttrs.push(c.Required), et(n, a)), r.field_value in e && n.FieldAttrs.push(eo("value", e[r.field_value])), n = X([d.AddClass, d.AddDataAttrs, d.WidthFillWrap, d.Length, d.AllowChars, d.PreventChars, d.CharCounter, d.WordCounter], a, n); var o = ee(s, a, !0, i); return n.Html += o.above + o.left + o.right + Q("input", i, n.FieldClassList.concat(l), n.FieldAttrs, n.WidthFill) + o.below, n } function X(t, a, s) { if (-1 !== t.indexOf(d.AddClass) && d.AddClass in a && r.param in a[d.AddClass] && s.FieldClassList.push(a[d.AddClass][r.param]), -1 !== t.indexOf(d.AddDataAttrs) && d.AddDataAttrs in a && r.params in a[d.AddDataAttrs] && (s.FieldAttrs = s.FieldAttrs.concat(ef(a[d.AddDataAttrs][r.params]))), -1 !== t.indexOf(d.Length) && d.Length in a) try { var i = eh(a[d.Length][r.params]); if (d.Min in i) try { s.FieldAttrs.push(ed(c.DATA_MinLength, parseInt(i[d.Min]))) } catch (n) { e.console && console.log("JFS Error: Error parsing min length status modifier.", a, n) } if (d.Max in i) try { s.FieldAttrs.push(eo(c.MaxLength, i[d.Max])) } catch (l) { e.console && console.log("JFS Error: Error parsing max length status modifier.", a, l) } if (d.Status in i) try { var o = "" !== i[d.Status] ? i[d.Status] : "always"; s.FieldAttrs.push(ed(c.DATA_ShowStatus, o)) } catch (p) { e.console && console.log("JFS Error: Error parsing length status modifier.", a, p) } } catch (h) { e.console && console.log("JFS Error: Error parsing length modifiers.", a, h) } if (-1 !== t.indexOf(d.CharCounter) && d.CharCounter in a && (s.FieldClassList.push(u.CharCounter), s.FieldContClassList.push(u.CharCounter)), -1 !== t.indexOf(d.WordCounter) && d.WordCounter in a && (s.FieldClassList.push(u.WordCounter), s.FieldContClassList.push(u.WordCounter)), -1 !== t.indexOf(d.WidthFillWrap) && d.WidthFillWrap in a) try { s.WidthFill = "true" === a[d.WidthFillWrap][r.param] } catch (f) { e.console && console.log("JFS Error: Error parsing width fill wrap modifier.", a, f) } if (-1 !== t.indexOf(d.AllowChars) && d.AllowChars in a) try { s.FieldAttrs.push(ed(c.DATA_AllowChars, a[d.AllowChars][r.param])) } catch (m) { e.console && console.log("JFS Error: Error parsing allow chars modifier.", a, m) } if (-1 !== t.indexOf(d.PreventChars) && d.PreventChars in a) try { s.FieldAttrs.push(ed(c.DATA_PreventChars, a[d.PreventChars][r.param])) } catch (b) { e.console && console.log("JFS Error: Error parsing prevent chars modifier.", a, b) } return s } function Q(e, t, a, s, i, n) { var l, r, o = ""; return a.push(u.Field + "_" + e), s.push(eo("class", a.join(" "))), t.AddZeroedTabIndexes && s.push(eo("tabindex", "0")), "input" === e ? o = "<input " + s.join(" ") + "/>" : "textarea" === e ? o = "<textarea " + s.join(" ") + ">" + (l = n, String(l).replace(/&/g, "&amp;").replace(/"/g, "&quot;").replace(/'/g, "&#39;").replace(/</g, "&lt;").replace(/>/g, "&gt;")) + "</textarea>" : "select" === e ? o = "<select " + s.join(" ") + ">" + n + "</select>" : "button" === e && (o = "<button " + s.join(" ") + ">" + n + "</button>"), i && (o = (r = o, '<span class="' + u.FieldWrap + '">' + r + "</span>")), o } function Z(e, t) { for (var a = "", s = 0; s < e.length; s++)if (r.key in e[s]) { if (r.options in e[s]) { var i = e[s][r.options]; a += "<optgroup " + eo("label", e[s][r.key]) + ">"; for (var n = 0; n < i.length; n++)a += z(i[n], t); a += "</optgroup>" } } else a += z(e[s], t); return a } function z(t, a) { var s = ""; try { var i = {}; r.mods in t && (i = ec(t[r.mods])); var n = []; n.push(eo("value", t[r.value])), r.disabled in t && "true" === t[r.disabled] && n.push(c.Disabled), t[r.value] === a && n.push(c.Selected), d.AddClass in i && r.param in i[d.AddClass] && n.push(eo("class", i[d.AddClass][r.param])), d.AddDataAttrs in i && r.params in i[d.AddDataAttrs] && (n = n.concat(ef(i[d.AddDataAttrs][r.params]))), s += "<option " + n.join(" ") + ">" + t[r.label] + "</option>" } catch (l) { e.console && console.log("JFS Error: Error parsing select option modifiers.", t, l) } return s } function ee(t, a, s, i) { var n = { above: "", right: "", below: "", left: "" }; if (s && d.AugmentBtns in a) try { for (var l = a[d.AugmentBtns][r.field_btns], o = 0; o < l.length; o++) { var p = eh(l[o][r.params]), h = d.ButtonPosition in p ? p[d.ButtonPosition] : i.FieldButtonPosition, f = d.ButtonText in p ? p[d.ButtonText] : "", m = d.ButtonTitle in p ? p[d.ButtonTitle] : "", b = d.ButtonIconLabelPosition in p ? p[d.ButtonIconLabelPosition] : i.IconLabelPosition, A = d.ButtonFunction in p ? p[d.ButtonFunction] : "", v = [u.AugmentBtn, u.AugmentBtn + "_" + h]; "" === m && (m = "" !== f ? f : "Button"); var g = "", F = ""; "" !== f && v.push(u.AugmentBtn + "_label_" + b), "btn_icon" in p && (F = "<img src='" + p.btn_icon + "' " + eo("alt", "Icon: " + m) + "/>", v.push(u.AugmentBtn + "_icon")), g = "left" === b ? f + F : F + f; var C = []; C.push(eo("type", "button")), C.push(eo("class", v.join(" "))), C.push(eo("title", m)), C.push(ed(c.DATA_BtnFunct, A)), C.push(ed(c.DATA_FormKeys, t)), n[h] += "<button " + C.join(" ") + ">" + g + "</button>" } } catch (y) { e.console && console.log("JFS Error: Error parsing augment buttons modifiers.", a, y) } return n } function et(e, t) { void 0 !== t[d.Req][r.param] && "" !== t[d.Req][r.param] && e.FieldAttrs.push(ed(c.DATA_RequiredMessage, t[d.Req][r.param])) } function ea(e) { var t = []; return e.children().each(function (e, a) { var s = jQuery(a); a.nodeName === r.item && (s.children().length > 0 ? t.push(es(s)) : t.push(s.text())) }), t } function es(e) { var t = {}; return e.children().each(function (e, a) { var s = jQuery(a), i = a.nodeName; i in r && (i = r[i]), s.children().length > 0 ? t[i] = ea(s) : t[i] = s.text() }), t } function ei(e, t, a, s) { var i = {}; jQuery.each(t, function (e, t) { !function e(t, a, s) { "string" == typeof a ? s[t] = a : jQuery.each(a, function (a, i) { var n = t + "/" + a; "string" == typeof i ? s[n] = i : (s[n] = !0, e(n, i, s)) }) }(e, t, i) }); for (var n = 0; n < e.length; n++) { var l = e[n], o = r.key in l ? l[r.key] : ""; en(o, o, a, l[r.fields], i, s) } } function en(e, t, a, s, i, n) { for (var l = 0; l < s.length; l++) { var o = s[l], d = "" !== e ? e + "/" + o[r.key] : "0/" + o[r.key]; if (r.field_sets in o) { if (d + "/0" in i) for (var u = 0; u < 500; u++) { var c = d + "/" + u; if (c in i) { var p = a + t + "/" + o[r.key]; o[r.field_sets][u] = eF(n.RepeatableGroups.Adds[p]), o[r.field_sets][u][r.key] = u + "", en(c, p, a, o[r.field_sets][u][r.fields], i, n) } } else o[r.field_sets] = [] } else d in i && (o[r.field_value] = i[d]) } } function el(e) { for (var t = {}, a = {}, s = e[r.field_sets], i = 0; i < s.length; i++) { var n = s[i]; if (r.fields in n) { for (var l = n[r.fields], o = 0; o < l.length; o++)if (r.key in l[o]) { var d = l[o][r.key]; r.field_value in l[o] ? a[d] = l[o][r.field_value] : a[d] = "" } } } return t[r.values] = a, t } function er(e, t) { return t.ContainerId + "_" + e.join("_") } function eo(e, t) { return e + '="' + eu(t) + '"' } function ed(e, t) { return "data-" + e + "='" + ("string" == typeof t ? eu(t) : JSON.stringify(t)) + "'" } function eu(e) { return String(e).replace(/&/g, "&amp;").replace(/'/g, "&apos;").replace(/"/g, "&quot;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/\r\n/g, "&#13;").replace(/[\r\n]/g, "&#13;") } function ec(e) { for (var t = {}, a = 0; a < e.length; a++)t[e[a][r.key]] = e[a]; return t } function ep(e, t) { for (var a = ec(e), s = 0; s < t.length; s++)if (r.key in t[s]) { var i = t[s][r.key]; if (i in a) { var n = t[s][r.param]; i === d.AddClass && (n = a[i][r.param].split(" ").concat(n.split(" ")).join(" ")); for (var l = 0; l < e.length; l++)e[l][r.key] === i && (e[l][r.param] = n) } else e.push(t[s]) } return e } function eh(e) { for (var t = {}, a = 0; a < e.length; a++) { var s = r.param in e[a] ? e[a][r.param] : ""; t[e[a][r.key]] = s } return t } function ef(e) { for (var t = [], a = 0; a < e.length; a++) { var s = r.param in e[a] ? e[a][r.param] : ""; t.push(ed(e[a][r.key], s)) } return t } function em(e, t, a) { e += ""; var s = ""; a && (e = e.replace(/ /g, "_")); for (var i = 0; i < e.length; i++)-1 !== t.toString().indexOf(e.charAt(i)) && (s += e.charAt(i)); return s } function eb(e) { var t = e.parent().parent().find("span." + u.CharCounterText).eq(0), a = e.val().length; t.text(a + " character" + (1 === a ? "" : "s")) } function eA(e) { var t = e.parent().parent().find("span." + u.WordCounterText).eq(0), a = e.val().match(/\S+/g), s = a && a.length || 0; t.text(s + " word" + (1 === s ? "" : "s")) } function ev(e, t, a, s) { var i = []; s && "" !== a && i.push({ l: a, v: "" }); for (var n = 0; n < e.length; n++)i.push({ l: e[n], v: t[n] }); return i } function eg(e, t) { return Array(t - (e + "").length + 1).join("0") + e } function eF(e) { return JSON.parse(JSON.stringify(e)) } function eC(e) { for (var t = new Date, a = [], s = 0; s < 10; s++)a[s] = parseInt(t.getUTCFullYear() + s) + ""; for (var i = [], n = 0; n < 31; n++)i[n] = eg(n + 1, 2) + ""; for (var l = [], r = 0; r < 12; r++)l[r] = eg(r + 1, 2) + ""; for (var o = [], d = 0; d < 60; d++)o[d] = eg(d, 2) + ""; for (var u = [], c = 0; c < 60; c++)u[c] = eg(c, 2) + ""; var p = ["Ms", "Miss", "Mrs", "Mr", "Dr", "Prof", "Coach", "Pres", "Atty", "Rev", "Hon"], h = ["Female", "Male"], f = ["Single", "Married", "Separated", "Divorced", "Widowed", "Other"], m = ["AK (Alaska)", "AL (Alabama)", "AR (Arkansas)", "AZ (Arizona)", "CA (California)", "CO (Colorado)", "CT (Connecticut)", "DC (Dist. of Columbia)", "DE (Delaware)", "FL (Florida)", "GA (Georgia)", "HI (Hawaii)", "IA (Iowa)", "ID (Idaho)", "IL (Illinois)", "IN (Indiana)", "KS (Kansas)", "KY (Kentucky)", "LA (Louisiana)", "MA (Massachusetts)", "MD (Maryland)", "ME (Maine)", "MI (Michigan)", "MN (Minnesota)", "MO (Missouri)", "MS (Mississippi)", "MT (Montana)", "NC (North Carolina)", "ND (North Dakota)", "NE (Nebraska)", "NH (New Hampshire)", "NJ (New Jersey)", "NM (New Mexico)", "NV (Nevada)", "NY (New York)", "OH (Ohio)", "OK (Oklahoma)", "OR (Oregon)", "PA (Pennsylvania)", "RI (Rhode Island)", "SC (South Carolina)", "SD (South Dakota)", "TN (Tennessee)", "TX (Texas)", "UT (Utah)", "VA (Virginia)", "VT (Vermont)", "WA (Washington)", "WI (Wisconsin)", "WV (West Virginia)", "WY (Wyoming)"], b = ["AK", "AL", "AR", "AZ", "CA", "CO", "CT", "DC", "DE", "FL", "GA", "HI", "IA", "ID", "IL", "IN", "KS", "KY", "LA", "MA", "MD", "ME", "MI", "MN", "MO", "MS", "MT", "NC", "ND", "NE", "NH", "NJ", "NM", "NV", "NY", "OH", "OK", "OR", "PA", "RI", "SC", "SD", "TN", "TX", "UT", "VA", "VT", "WA", "WI", "WV", "WY"], A = ["AS (American Samoa)", "GU (Guam)", "MP (Northern Mariana Islands)", "PR (Puerto Rico)", "VI (Virgin Islands)", "AA (Armed Forces - Americas excluding Canada)", "AE (Armed Forces - Europe, Canada, Middle East, Africa)", "AP (Armed Forces - Pacific)"], v = ["AS", "GU", "MP", "PR", "VI", "AA", "AE", "AP"], g = ["AB (Alberta)", "BC (British Columbia)", "MB (Manitoba)", "NB (New Brunswick)", "NL (Newfoundland and Labrador)", "NT (Northwest Territories)", "NS (Nova Scotia)", "NU (Nunavut)", "ON (Ontario)", "PE (Prince Edward Island)", "QC (Quebec)", "SK (Saskatchewan)", "YT (Yukon)"], F = ["AB", "BC", "MB", "NB", "NL", "NT", "NS", "NU", "ON", "PE", "QC", "SK", "YT"]; return { name_prefix: ev(p, p, "Select...", e), gender: ev(h, h, "Select...", e), marital_status: ev(f, f, "Select...", e), current_year_plus_10: ev(a, a, "", e), numeric_months_and_names: ev(["01 - January", "02 - February", "03 - March", "04 - April", "05 - May", "06 - June", "07 - July", "08 - August", "09 - September", "10 - October", "11 - November", "12 - December"], ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11"], "", e), numeric_days: ev(i, i, "", e), hours_12: ev(l, l, "", e), minutes: ev(o, o, "", e), seconds: ev(u, u, "", e), link_targets: ev(["Current Window", "New Window"], ["_self", "_blank"], "", e), yes_no: ev(["Yes", "No"], ["yes", "no"], "", e), no_yes: ev(["No", "Yes"], ["no", "yes"], "", e), us_states: ev(m, b, "Select a State...", e), us_territories: ev(A, v, "Select a Territory...", e), canada_provinces: ev(g, F, "Select a State...", e), us_states_and_territories_and_canada: ev(["Outside U.S./Canada"], ["OUTSIDE"], "Select a State...", e).concat({ k: "US", os: ev(m, b, "").concat(ev(A, v, "", e)) }).concat({ k: "Canada", os: ev(g, F, "", e) }) } } e.JFS = y }(window);
